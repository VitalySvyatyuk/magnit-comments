<html>
<head>
    <meta charset="UTF-8">
    <title>Магнит | Добавить комментарий</title>
    <style>
        .elements { width: 170px; }
        .errorBorder { border: 2px solid red }
    </style>
    <script type="text/javascript" 
    src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script>
        function changeCities(region) {
            $.ajax({
                url: "/comment/",
                context: document.body,
                data: {"region": region},
                success: function(response){
                    $('#city option[value!="none"]').remove();
                    $.each(response, function (i, item) {
                        $('#city').append($('<option>', {
                            value: i,
                            text: item
                        }));
                    });
                }
            });
        };
        // $(document).ready(function(){
        //     if ($('#surname').text() == "" || $('#name').text() == "" ||
        //         $('#comment').text() == "") {
        //             $('#button').prop('disabled', true);
        //     } else {
        //        $('#button').prop('disabled', false);
        //     }
        // });

// WHEN THE ALL VALIDATIONS END:     $('#button').prop('disabled', false);

        var errors = false;
        function phoneValidation(phone) {
            var phoneNumber = $(phone).val();
            if (phoneNumber == "") {
                $(phone).removeClass("errorBorder");
            } else {
                var regExpPhone = /^\([0-9]{2,4}\)[0-9]{5,15}$/;
                var validPhoneResult = regExpPhone.test(phoneNumber);
                if (validPhoneResult) {
                    $(phone).removeClass("errorBorder");
                } else {
                    $(phone).addClass("errorBorder");
                }  
            }
        };
        function emailValidation(email) {
            var emailString = $(email).val();
            if (emailString == "") {
                $(email).removeClass("errorBorder");
            } else {
                var regExpEmail = /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
                var validEmailResult = regExpEmail.test(emailString);
                if (validEmailResult) {
                    $(email).removeClass("errorBorder");
                } else {
                    $(email).addClass("errorBorder");
                }  
            }
        };
        function emptyValidation(compulsoryField) {
            if($(compulsoryField).val() == "") {
                $(compulsoryField).addClass("errorBorder");
            } else {
                $(compulsoryField).removeClass("errorBorder");
            }
        };
    </script>
</head>
<body>
    <form action="../view/" method="POST">
        <label for="surname">Фамилия*:</label><br>
        <input type="text" name="surname" id="surname" class="elements" onblur="emptyValidation(this)"><br>
        <label for="name">Имя*:</label><br>
        <input type="text" name="name" id="name" class="elements" onblur="emptyValidation(this)"><br>
        <label for="middlename">Отчество:</label><br>
        <input type="text" name="middlename" id="middlename" class="elements"><br>
        <label for="region">Регион:</label><br>
        <select id="region" onchange="changeCities(this.value)" class="elements">
            <option value="default"></option>
        </select><br>
        <label for="city">Город:</label><br>
        <select id="city" class="elements">%s</select><br>
        <label for="phone">Телефон:</label><br>
        <input type="text" name="phone" id="phone" class="elements" onblur="phoneValidation(this)"><br>
        <label for="email">Email:</label><br>
        <input type="text" name="email" id="email" class="elements" onblur="emailValidation(this)"><br>
        <label for="comment">Комментарий*:</label><br>
        <textarea name="comment" id="comment" class="elements" onblur="emptyValidation(this)"></textarea><br>
        <input type="submit" value="Добавить" id="button" disabled><br><br>
        <p>Поля со звёздочкой (*) обязательны для заполнения</p>
        <p>Образец заполнения поля Телефон: (928)8186487</p>
    </form>
</body>
</html>